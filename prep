# extract greeen channel
vchan if=image of=image.gr c=2

# gaussian filter
vgfilt if=image.gr of=image.gau 

#erode the mask
#vmorph if=mask.vx of=mask.e s=2 -e #problem exists (see piazza)


#ADD between top-hat output and mask
#vopif=mask.e ig=image.tophat.add4 of=image.and -and

# opening
vcc opening.c -o opening
opening if=image.gau of=image.op s=4

# closing
vcc closing.c -o closing
closing if=image.gau of=image.cl s=4

# toggle mapping filter
vcc toggle.c -o toggle
toggle if=image.op ig=image.cl bf=image.gau of=image.toggle

# top-hat
vcc tophat.c -o tophat
tophat if=image.toggle of=image.tophat s=9 # opening kernel size: 9

# change from unsigned int to float
vfix if=image.tophat of=image.tophat.f -float

# standardize
vcc std.c -o std
std if=image.tophat.f of=tophat.std

# threshold
vcc thresh.c -o thresh
thresh if=tophat.std of=segment p=0.85



